---
import '../styles/global.css';
import siteData from '../data.json';

const { ristorante, menu } = siteData;
const numeroWhatsapp = ristorante.telefono.replace(/\s+/g, '');
const messaggioPreimpostato = `Buonasera Milos. Desidero prenotare un tavolo a nome di...`;
const linkWhatsapp = `https://wa.me/${numeroWhatsapp}?text=${encodeURIComponent(messaggioPreimpostato)}`;
---

<html lang="it" class="scroll-smooth bg-[#17110e]">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{ristorante.nome} | Trattoria d'Eccellenza</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;0,700;0,900;1,500&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style define:vars={{ colorNocciola: ristorante.colore_nocciola, colorRosso: ristorante.colore_rosso }}>
      body { 
        font-family: 'Lato', sans-serif; 
        background-color: #17110e; 
        color: #f7f3eb; 
        overflow-x: hidden; 
      }
      h1, h2, h3, h4, .font-trattoria { font-family: 'Playfair Display', serif; }
      
      .ingresso-di-botto {
        animation: fadeIn 0.8s ease-out forwards;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.98); }
        to { opacity: 1; transform: scale(1); }
      }

      .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
      .reveal.active { opacity: 1; transform: translateY(0); }
    </style>
  </head>
  <body class="selection:bg-[var(--colorRosso)] selection:text-white flex flex-col min-h-screen">

    <nav class="fixed top-0 left-0 w-full z-50 bg-[#17110e]/95 backdrop-blur-md border-b border-[#2d221c] shadow-xl">
      <div class="max-w-7xl mx-auto px-4 lg:px-8">
        <div class="flex justify-between items-center h-20 md:h-24">
          <div class="flex items-center gap-4 cursor-pointer" onclick="window.scrollTo(0,0)">
            <img src="/logo.png" alt="Logo Trattoria" class="h-12 w-12 md:h-14 md:w-14 object-contain" />
            <span class="font-trattoria font-bold text-2xl md:text-3xl tracking-wider text-[var(--colorNocciola)]">{ristorante.nome}</span>
          </div>
          <div class="hidden md:flex space-x-10 items-center">
            <a href="#filosofia" class="text-[#d0c6b6] hover:text-[var(--colorNocciola)] transition-colors text-sm uppercase tracking-widest font-bold">La Filosofia</a>
            <a href="#menu" class="text-[#d0c6b6] hover:text-[var(--colorNocciola)] transition-colors text-sm uppercase tracking-widest font-bold">Il Menù</a>
            <a href={linkWhatsapp} target="_blank" class="bg-[var(--colorRosso)] text-white px-8 py-3 font-trattoria tracking-widest uppercase text-sm font-bold shadow-lg hover:bg-white hover:text-[var(--colorRosso)] transition-all duration-300">
              Prenota il Tavolo
            </a>
          </div>
        </div>
      </div>
    </nav>

    <header class="relative h-screen w-full flex items-center justify-center text-center ingresso-di-botto">
      <div class="absolute inset-0 z-0">
        <img src={ristorante.sfondo_hero} alt="Sfondo Trattoria" class="w-full h-full object-cover" />
        <div class="absolute inset-0 bg-[#17110e]/75"></div> 
        <div class="absolute bottom-0 left-0 w-full h-40 bg-gradient-to-t from-[#17110e] to-transparent"></div> 
      </div>
      
      <div class="relative z-10 flex flex-col items-center mt-16 px-4">
        <img src="/logo.png" alt="Logo Trattoria" class="h-28 w-28 md:h-40 md:w-40 mb-6 object-contain drop-shadow-[0_0_15px_rgba(0,0,0,0.8)]" />
        
        <h1 class="text-6xl md:text-[7rem] font-bold text-white mb-6 tracking-wide font-trattoria drop-shadow-2xl leading-none">
          {ristorante.nome}
        </h1>
        <div class="flex items-center gap-4 mb-8">
          <div class="h-px w-12 bg-[var(--colorNocciola)]"></div>
          <span class="text-[var(--colorNocciola)] text-xl font-trattoria italic">Trattoria d'Eccellenza</span>
          <div class="h-px w-12 bg-[var(--colorNocciola)]"></div>
        </div>
        <p class="text-lg md:text-xl text-[#e8dfd1] font-light tracking-widest uppercase max-w-2xl leading-relaxed drop-shadow-md">
          {ristorante.slogan}
        </p>
      </div>
    </header>

    <section id="filosofia" class="py-24 px-4 max-w-4xl mx-auto text-center scroll-mt-20 reveal z-10">
      <h2 class="text-4xl md:text-5xl font-bold text-white mb-8 tracking-wide font-trattoria">L'Arte della Carne</h2>
      <div class="w-16 h-1 bg-[var(--colorRosso)] mx-auto mb-10"></div>
      <p class="text-xl text-[#d0c6b6] font-light leading-relaxed italic font-trattoria">
        "{ristorante.chi_siamo}"
      </p>
    </section>

    <main id="menu" class="py-20 scroll-mt-20 relative bg-[#1c1511] border-y border-[#2d221c]">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        
        <div class="space-y-32">
          {menu.map((sezione) => (
            <div class="reveal">
              <div class="flex items-center justify-center mb-16 gap-6">
                <div class="h-px bg-[#4a392f] w-full max-w-[120px]"></div>
                <h3 class="text-3xl md:text-4xl font-bold text-[var(--colorNocciola)] tracking-widest uppercase font-trattoria text-center">
                  {sezione.categoria}
                </h3>
                <div class="h-px bg-[#4a392f] w-full max-w-[120px]"></div>
              </div>

              <div class="space-y-16">
                {sezione.piatti.map((piatto, index) => (
                  <div class={`flex flex-col ${index % 2 === 0 ? 'lg:flex-row' : 'lg:flex-row-reverse'} items-stretch gap-0 bg-[#241c17] rounded-sm overflow-hidden border border-[#362922] hover:border-[var(--colorNocciola)] transition-colors shadow-2xl reveal`}>
                    
                    <div class="w-full lg:w-1/2 h-[350px] md:h-[400px] overflow-hidden relative border-b lg:border-b-0 lg:border-r border-[#362922]">
                      <img src={piatto.immagine} alt={piatto.nome} class="w-full h-full object-cover hover:scale-105 transition-transform duration-[1.5s] ease-out" />
                    </div>

                    <div class="w-full lg:w-1/2 flex flex-col justify-center p-8 lg:p-14">
                      <div class="flex flex-col lg:flex-row lg:justify-between lg:items-end mb-6 gap-2 border-b border-[#362922] pb-6">
                        <h4 class="text-2xl md:text-3xl font-bold text-white font-trattoria tracking-wide">
                          {piatto.nome}
                        </h4>
                        <span class="text-3xl font-bold text-[var(--colorRosso)] font-trattoria mt-2 lg:mt-0">{piatto.prezzo}</span>
                      </div>
                      <p class="text-[#d0c6b6] text-lg leading-relaxed font-light">{piatto.descrizione}</p>
                    </div>

                  </div>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>
    </main>

    <footer id="contatti" class="bg-[#120d0b] pt-24 pb-12 mt-auto">
      <div class="max-w-7xl mx-auto px-6 lg:px-8">
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-16 mb-20 border-b border-[#2d221c] pb-16">
          
          <div class="text-center md:text-left flex flex-col items-center md:items-start">
            <img src="/logo.png" alt="Logo" class="h-16 w-16 mb-6 opacity-80" />
            <h3 class="text-3xl font-bold mb-4 text-[var(--colorNocciola)] tracking-widest uppercase font-trattoria">{ristorante.nome}</h3>
            <p class="text-[#968a7c] text-sm leading-relaxed font-light">
              La vera essenza della trattoria siciliana, dove il fuoco incontra la passione.
            </p>
          </div>

          <div class="text-center">
            <h4 class="text-white font-bold tracking-widest uppercase text-sm mb-6 font-trattoria">Dove e Quando</h4>
            <div class="text-[#d0c6b6] text-sm font-light space-y-4 mb-8">
              <p>{ristorante.indirizzo}</p>
              <p>{ristorante.telefono}</p>
            </div>
            <div class="inline-block border border-[#2d221c] px-6 py-3 bg-[#17110e]">
              <p class="text-[var(--colorNocciola)] font-bold text-lg font-trattoria">Aperti Tutti i Giorni</p>
              <p class="text-[#968a7c] text-sm">Dalle 19:30 alle 01:00</p>
            </div>
          </div>

          <div class="text-center md:text-right flex flex-col justify-center items-center md:items-end">
            <h4 class="text-white font-bold tracking-widest uppercase text-sm mb-6 font-trattoria">Prenota il tuo posto</h4>
            <p class="text-[#968a7c] text-sm font-light mb-6">Assicurati un tavolo inviandoci un messaggio su WhatsApp. Risposta immediata.</p>
            <a href={linkWhatsapp} target="_blank" class="bg-[var(--colorRosso)] text-white px-8 py-4 font-bold tracking-widest uppercase text-sm hover:bg-[var(--colorNocciola)] hover:text-[#120d0b] transition-colors duration-300 w-full md:w-auto text-center shadow-lg">
              Prenota Ora
            </a>
          </div>

        </div>

        <div class="flex flex-col md:flex-row justify-between items-center text-xs text-[#6e6357] font-light uppercase tracking-widest gap-4">
          <p>© 2026 {ristorante.nome}. P.IVA 01234567891.</p>
          <p>Realizzato con eccellenza da <span class="text-[var(--colorNocciola)]">La Tua Agenzia</span></p>
        </div>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const reveals = document.querySelectorAll(".reveal");
        const revealOnScroll = new IntersectionObserver(function(entries) {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add("active");
            }
          });
        }, { threshold: 0.1 });

        reveals.forEach(reveal => revealOnScroll.observe(reveal));
      });
    </script>

  </body>
</html>