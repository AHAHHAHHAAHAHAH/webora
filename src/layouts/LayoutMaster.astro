---
// src/layouts/LayoutMaster.astro
---
<html lang="it" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Caffè Europa | Il Salotto di Catania</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <style is:global>
      :root {
        --colorNocciola: #D4AF37; 
        --colorRosso: #8B0000;    
      }
      body {
        background-color: #0a0705;
        color: white;
        font-family: 'Inter', sans-serif;
        overflow-x: hidden;
      }
      .font-elegante {
        font-family: 'Playfair Display', serif;
      }
      
      .reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease-out;
      }
      .reveal.active {
        opacity: 1;
        transform: translateY(0);
      }
      
      #mobile-menu {
        transition: transform 0.4s ease-in-out;
        transform: translateY(-100%);
      }
      #mobile-menu.open {
        transform: translateY(0);
      }
    </style>
  </head>
  <body class="antialiased flex flex-col min-h-screen">
    
    <nav class="fixed w-full z-50 bg-[#0a0705]/95 backdrop-blur-md border-b border-white/10 transition-all duration-300" id="navbar">
      <div class="max-w-7xl mx-auto px-4 lg:px-8">
        <div class="flex justify-between items-center h-20">
          
          <a href="/" class="text-[var(--colorNocciola)] text-xl md:text-2xl font-elegante tracking-widest uppercase font-bold drop-shadow-md z-50 relative">
            Caffè Europa
          </a>
          
          <div class="hidden md:flex space-x-8 text-xs font-bold tracking-widest uppercase text-gray-300">
            <a href="/" class="hover:text-[var(--colorNocciola)] transition-colors">Home</a>
            <a href="/menu-fotografico" class="hover:text-[var(--colorNocciola)] transition-colors">Il Menù</a>
            <a href="/riserva" class="hover:text-[var(--colorNocciola)] transition-colors">Prenota</a>
            <a href="/dicono-di-noi" class="hover:text-[var(--colorNocciola)] transition-colors">Recensioni</a>
            <a href="/lavora-con-noi" class="hover:text-[var(--colorNocciola)] transition-colors">Lavora con noi</a>
          </div>

          <button id="hamburger-btn" class="md:hidden text-[var(--colorNocciola)] z-50 relative p-2 focus:outline-none" aria-label="Menu">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path id="hamburger-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>

        </div>
      </div>
    </nav>

    <div id="mobile-menu" class="fixed inset-0 bg-[#0a0705] z-40 flex flex-col items-center justify-center pt-20 h-screen md:hidden">
        <div class="flex flex-col space-y-8 text-center text-lg font-bold tracking-widest uppercase text-gray-300">
            <a href="/" class="mobile-link hover:text-[var(--colorNocciola)] transition-colors">Home</a>
            <a href="/menu-fotografico" class="mobile-link hover:text-[var(--colorNocciola)] transition-colors">Il Menù</a>
            <a href="/riserva" class="mobile-link hover:text-[var(--colorNocciola)] transition-colors">Prenota / Ordina</a>
            <a href="/dicono-di-noi" class="mobile-link hover:text-[var(--colorNocciola)] transition-colors">Recensioni</a>
            <a href="/lavora-con-noi" class="mobile-link hover:text-[var(--colorNocciola)] transition-colors">Lavora con noi</a>
        </div>
    </div>

    <main class="flex-grow pt-0">
      <slot />
    </main>

    <footer class="bg-[#120d0b] py-16 border-t border-white/5 text-center relative z-10">
      <div class="max-w-4xl mx-auto px-4">
        <h2 class="text-3xl text-[var(--colorNocciola)] font-elegante uppercase tracking-widest mb-4">Caffè Europa</h2>
        <p class="text-gray-500 text-xs md:text-sm mb-8 tracking-widest uppercase font-light">Il Salotto di Catania dal 1960</p>
        
        <div class="flex flex-wrap justify-center gap-6 text-xs uppercase tracking-widest text-gray-400 mb-12">
          <a href="/menu-fotografico" class="hover:text-white transition-colors">Menù</a>
          <a href="/riserva" class="hover:text-white transition-colors">Prenota / Ordina</a>
          <a href="/dicono-di-noi" class="hover:text-white transition-colors">Recensioni</a>
          <a href="/lavora-con-noi" class="hover:text-white transition-colors">Lavora con noi</a>
        </div>
        
        <p class="text-[10px] text-gray-600 tracking-widest uppercase">&copy; {new Date().getFullYear()} Caffè Europa. Tutti i diritti riservati.</p>
      </div>
    </footer>

    <script is:inline>
      // 1. Animazioni Testo
      function reveal() {
        var reveals = document.querySelectorAll(".reveal");
        for (var i = 0; i < reveals.length; i++) {
          var windowHeight = window.innerHeight;
          var elementTop = reveals[i].getBoundingClientRect().top;
          var elementVisible = 100;
          if (elementTop < windowHeight - elementVisible) {
            reveals[i].classList.add("active");
          }
        }
      }
      window.addEventListener("scroll", reveal);
      reveal();

      // 2. Menu Mobile sicuro
      document.addEventListener('DOMContentLoaded', () => {
        const btn = document.getElementById('hamburger-btn');
        const menu = document.getElementById('mobile-menu');
        const icon = document.getElementById('hamburger-icon');
        const links = document.querySelectorAll('.mobile-link');

        if (btn && menu && icon) {
          function toggleMenu() {
            menu.classList.toggle('open');
            if (menu.classList.contains('open')) {
              icon.setAttribute('d', 'M6 18L18 6M6 6l12 12'); 
              document.body.style.overflow = 'hidden'; 
            } else {
              icon.setAttribute('d', 'M4 6h16M4 12h16M4 18h16'); 
              document.body.style.overflow = ''; 
            }
          }

          btn.addEventListener('click', toggleMenu);
          links.forEach(link => link.addEventListener('click', toggleMenu));
        }
      });
    </script>
  </body>
</html>